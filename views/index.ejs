<%
    var category, list, i, k;
%>
<!DOCTYPE html>
<html>
    <head>
        <title><%= title %></title>
        <link rel='stylesheet' href='/stylesheets/typeahead.css' />
        <link rel='stylesheet' href='/stylesheets/style.css' />
    </head>
    <body>
        <div id="wrapper">
            <div class="header">
                <h1><%= title %></h1>
                <div class="typeAhead">
                    <input id="searchbar" type="text" placeholder="Search for a museum"/>
                </div>
            </div>

            <div class="content">

                <% for (i = 0; i < categories.length; i++) { 
                    category = categories[i].category;
                    list = categories[i].results;
                %>

                    <div class="grid-list-wrapper">
                        <h2><%= category.description %></h2>

                        <ul>

                            <% for (k = 0; k < list.length; k++) { %>
                                <li>
                                    <a href="/museums/<%= list[k]._id %>">
                                        <img src="<%= list[k].imageURL %>" />
                                        <div class="info">
                                            <h3><%= list[k].name %></h3>
                                            <% if (list[k].location && list[k].location.locality) { %>
                                                <div class="italicized"><%= list[k].location.locality.short_name %>, <%= list[k].location.country.long_name %></div>
                                            <% } %>
                                        </div>
                                    </a>
                                </li>
                            <% } %>

                        </ul>

                    </div>

                <% } %>
            </div>

        </div>

        <script type="text/javascript">
            var data = "";
            <% if (locals.dump) { %>
                data = <%- dump %>;
            <% } %>
        </script>

        <script data-main="/js/main" src="/js/lib/require.js"></script>

        <script src="/js/typeahead.js"></script>
        <script>
            var input = document.getElementById("searchbar");
            var ta = new TypeAhead(input, {list: ["Louvre", "Museum of Modern Art", "Metropolitan Museum of Art"]});
        </script>



    </body>

</html>
